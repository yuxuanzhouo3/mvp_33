# CloudBase 需要创建的集合列表

## 必须创建的集合（按使用频率排序）

### 1. **users** ⭐⭐⭐ (最重要，立即需要)
- **用途**：存储用户信息
- **何时需要**：注册/登录时立即需要
- **当前状态**：❌ 缺失（导致注册失败）

### 2. **orders** ⭐⭐ (支付功能)
- **用途**：存储订单信息
- **何时需要**：用户支付时
- **当前状态**：需要创建

### 3. **workspaces** ⭐⭐ (工作空间)
- **用途**：存储工作空间信息
- **何时需要**：创建/选择工作空间时
- **当前状态**：需要创建

### 4. **workspace_members** ⭐⭐ (工作空间成员)
- **用途**：存储工作空间成员关系
- **何时需要**：加入工作空间、查看成员时
- **当前状态**：需要创建

### 5. **messages** ⭐⭐ (消息)
- **用途**：存储聊天消息
- **何时需要**：发送/接收消息、查看消息历史时
- **当前状态**：需要创建

### 6. **conversations** ⭐ (会话)
- **用途**：存储会话信息（聊天室、群组等）
- **何时需要**：创建会话、查看会话列表时
- **当前状态**：需要创建

### 7. **conversation_members** ⭐ (会话成员)
- **用途**：存储会话成员关系
- **何时需要**：加入会话、查看会话成员时
- **当前状态**：需要创建

### 8. **contacts** ⭐ (联系人)
- **用途**：存储联系人信息
- **何时需要**：添加联系人、查看联系人列表时
- **当前状态**：需要创建

### 9. **contact_requests** (联系人请求)
- **用途**：存储联系人添加请求
- **何时需要**：发送/接收联系人请求时
- **当前状态**：需要创建

### 10. **departments** (部门)
- **用途**：存储部门信息
- **何时需要**：管理组织架构时
- **当前状态**：需要创建

### 11. **user_profiles** (用户资料)
- **用途**：存储用户详细资料
- **何时需要**：查看/编辑用户资料时
- **当前状态**：需要创建

### 12. **hidden_messages** (隐藏消息)
- **用途**：存储用户隐藏的消息
- **何时需要**：隐藏消息功能
- **当前状态**：需要创建

## 创建顺序建议

### 立即创建（必须）
1. ✅ **users** - 注册功能需要

### 按需创建（当功能被使用时）
- 当用户尝试支付时 → 创建 **orders**
- 当用户创建/选择工作空间时 → 创建 **workspaces**, **workspace_members**
- 当用户发送消息时 → 创建 **messages**, **conversations**, **conversation_members**
- 当用户添加联系人时 → 创建 **contacts**, **contact_requests**

### 一次性全部创建（推荐）
如果你想要一次性准备好所有功能，可以创建所有12个集合。

## 创建方法

### 方法1：在 CloudBase 控制台手动创建（推荐）

1. 登录 [CloudBase 控制台](https://console.cloud.tencent.com/tcb)
2. 选择你的环境
3. 进入"数据库" → "集合管理"
4. 依次创建以下集合（名称必须完全匹配）：
   - `users`
   - `orders`
   - `workspaces`
   - `workspace_members`
   - `messages`
   - `conversations`
   - `conversation_members`
   - `contacts`
   - `contact_requests`
   - `departments`
   - `user_profiles`
   - `hidden_messages`

### 方法2：使用脚本自动创建

如果你配置了环境变量，可以运行：
```bash
node scripts/cloudbase_setup.js
```

## 注意事项

1. **集合名称必须完全匹配**（区分大小写）
2. **创建时不需要设置字段**，字段会在插入数据时自动创建
3. **可以先只创建 `users`**，其他集合按需创建
4. 如果某个功能报错 "Db or Table not exist"，说明对应的集合还没创建



































































